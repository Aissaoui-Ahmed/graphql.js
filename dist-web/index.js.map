{"version":3,"file":"index.js","sources":["../dist-src/version.js","../dist-src/error.js","../dist-src/graphql.js","../dist-src/with-defaults.js","../dist-src/index.js"],"sourcesContent":["export const VERSION = \"0.0.0-development\";\r\n","export class GraphqlError extends Error {\r\n    constructor(request, response) {\r\n        const message = response.data.errors[0].message;\r\n        super(message);\r\n        Object.assign(this, response.data);\r\n        this.name = \"GraphqlError\";\r\n        this.request = request;\r\n        // Maintains proper stack trace (only available on V8)\r\n        /* istanbul ignore next */\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, this.constructor);\r\n        }\r\n    }\r\n}\r\n","import { GraphqlError } from \"./error\";\r\nconst NON_VARIABLE_OPTIONS = [\r\n    \"method\",\r\n    \"baseUrl\",\r\n    \"url\",\r\n    \"headers\",\r\n    \"request\",\r\n    \"query\"\r\n];\r\nexport function graphql(request, query, options) {\r\n    options =\r\n        typeof query === \"string\"\r\n            ? (options = Object.assign({ query }, options))\r\n            : (options = query);\r\n    const requestOptions = Object.keys(options).reduce((result, key) => {\r\n        if (NON_VARIABLE_OPTIONS.includes(key)) {\r\n            result[key] = options[key];\r\n            return result;\r\n        }\r\n        if (!result.variables) {\r\n            result.variables = {};\r\n        }\r\n        result.variables[key] = options[key];\r\n        return result;\r\n    }, {});\r\n    return request(requestOptions).then(response => {\r\n        if (response.data.errors) {\r\n            throw new GraphqlError(requestOptions, {\r\n                data: response.data\r\n            });\r\n        }\r\n        return response.data.data;\r\n    });\r\n}\r\n","import { request as Request } from \"@octokit/request\";\r\nimport { graphql } from \"./graphql\";\r\nexport function withDefaults(request, newDefaults) {\r\n    const newRequest = request.defaults(newDefaults);\r\n    const newApi = (query, options) => {\r\n        return graphql(newRequest, query, options);\r\n    };\r\n    return Object.assign(newApi, {\r\n        defaults: withDefaults.bind(null, newRequest),\r\n        endpoint: Request.endpoint\r\n    });\r\n}\r\n","import { request } from \"@octokit/request\";\r\nimport { getUserAgent } from \"universal-user-agent\";\r\nimport { VERSION } from \"./version\";\r\nimport { withDefaults } from \"./with-defaults\";\r\nexport const graphql = withDefaults(request, {\r\n    headers: {\r\n        \"user-agent\": `octokit-graphql.js/${VERSION} ${getUserAgent()}`\r\n    },\r\n    method: \"POST\",\r\n    url: \"/graphql\"\r\n});\r\nexport function withCustomRequest(customRequest) {\r\n    return withDefaults(customRequest, {\r\n        method: \"POST\",\r\n        url: \"/graphql\"\r\n    });\r\n}\r\n"],"names":["request","Request","graphql"],"mappings":";;;AAAO,MAAM,OAAO,GAAG,mBAAmB;;ACAnC,MAAM,YAAY,SAAS,KAAK,CAAC;AACxC,IAAI,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE;AACnC,QAAQ,MAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;AACxD,QAAQ,KAAK,CAAC,OAAO,CAAC,CAAC;AACvB,QAAQ,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;AAC3C,QAAQ,IAAI,CAAC,IAAI,GAAG,cAAc,CAAC;AACnC,QAAQ,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC/B;AACA;AACA,QAAQ,IAAI,KAAK,CAAC,iBAAiB,EAAE;AACrC,YAAY,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AAC5D,SAAS;AACT,KAAK;AACL,CAAC;;ACZD,MAAM,oBAAoB,GAAG;AAC7B,IAAI,QAAQ;AACZ,IAAI,SAAS;AACb,IAAI,KAAK;AACT,IAAI,SAAS;AACb,IAAI,SAAS;AACb,IAAI,OAAO;AACX,CAAC,CAAC;AACF,AAAO,SAAS,OAAO,CAAC,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE;AACjD,IAAI,OAAO;AACX,QAAQ,OAAO,KAAK,KAAK,QAAQ;AACjC,eAAe,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,EAAE,OAAO,CAAC;AAC1D,eAAe,OAAO,GAAG,KAAK,CAAC,CAAC;AAChC,IAAI,MAAM,cAAc,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,GAAG,KAAK;AACxE,QAAQ,IAAI,oBAAoB,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;AAChD,YAAY,MAAM,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;AACvC,YAAY,OAAO,MAAM,CAAC;AAC1B,SAAS;AACT,QAAQ,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;AAC/B,YAAY,MAAM,CAAC,SAAS,GAAG,EAAE,CAAC;AAClC,SAAS;AACT,QAAQ,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;AAC7C,QAAQ,OAAO,MAAM,CAAC;AACtB,KAAK,EAAE,EAAE,CAAC,CAAC;AACX,IAAI,OAAO,OAAO,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI;AACpD,QAAQ,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE;AAClC,YAAY,MAAM,IAAI,YAAY,CAAC,cAAc,EAAE;AACnD,gBAAgB,IAAI,EAAE,QAAQ,CAAC,IAAI;AACnC,aAAa,CAAC,CAAC;AACf,SAAS;AACT,QAAQ,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC;AAClC,KAAK,CAAC,CAAC;AACP,CAAC;;AC/BM,SAAS,YAAY,CAACA,SAAO,EAAE,WAAW,EAAE;AACnD,IAAI,MAAM,UAAU,GAAGA,SAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;AACrD,IAAI,MAAM,MAAM,GAAG,CAAC,KAAK,EAAE,OAAO,KAAK;AACvC,QAAQ,OAAO,OAAO,CAAC,UAAU,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;AACnD,KAAK,CAAC;AACN,IAAI,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE;AACjC,QAAQ,QAAQ,EAAE,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC;AACrD,QAAQ,QAAQ,EAAEC,OAAO,CAAC,QAAQ;AAClC,KAAK,CAAC,CAAC;AACP,CAAC;;ACPW,MAACC,SAAO,GAAG,YAAY,CAAC,OAAO,EAAE;AAC7C,IAAI,OAAO,EAAE;AACb,QAAQ,YAAY,EAAE,CAAC,mBAAmB,EAAE,OAAO,CAAC,CAAC,EAAE,YAAY,EAAE,CAAC,CAAC;AACvE,KAAK;AACL,IAAI,MAAM,EAAE,MAAM;AAClB,IAAI,GAAG,EAAE,UAAU;AACnB,CAAC,CAAC,CAAC;AACH,AAAO,SAAS,iBAAiB,CAAC,aAAa,EAAE;AACjD,IAAI,OAAO,YAAY,CAAC,aAAa,EAAE;AACvC,QAAQ,MAAM,EAAE,MAAM;AACtB,QAAQ,GAAG,EAAE,UAAU;AACvB,KAAK,CAAC,CAAC;AACP,CAAC;;;;"}